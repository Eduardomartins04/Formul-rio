<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Reporte de Horas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        h1 {
            font-size: 36px;
        }
        #erro {
            color: red;
            margin-top: 20px;
        }
        #carregarBtn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            font-size: 18px;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Reporte de Horas</h1>
    <div id="erro"></div>
    <button id="carregarBtn" onclick="carregarTasks()">Carregar as Minhas Tasks</button>

    <script>
        function carregarTasks() {
            const username = localStorage.getItem("username");
            const webhookURL = "https://hook.eu2.make.com/jhjovd8hy51dyvu75k0op3su8s9fkdgj";

            if (!username) {
                document.getElementById("erro").innerText = "Erro: utilizador não identificado.";
                return;
            }

            fetch(`${webhookURL}?username=${encodeURIComponent(username)}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("Erro ao contactar servidor.");
                    }
                    return response.json();
                })
                .then(data => {
                    console.log("Tasks recebidas:", data);
                    // Aqui podes adicionar lógica para mostrar as tasks no HTML
                })
                .catch(error => {
                    console.error("Erro ao carregar tasks:", error);
                    document.getElementById("erro").innerText = "Erro ao carregar tasks.";
                });
        }
    </script>
</body>
</html>

